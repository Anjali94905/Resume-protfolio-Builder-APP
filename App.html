<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resum√©AI ‚Äî Student Career Builder</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,700;0,900;1,300&family=DM+Mono:wght@300;400;500&family=Cabinet+Grotesk:wght@400;500;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #0d0d0d;
    --paper: #f5f0e8;
    --cream: #ede8dc;
    --gold: #c8a84b;
    --gold-light: #e8c96a;
    --rust: #c45c3a;
    --teal: #2a7a6f;
    --teal-light: #3a9d8f;
    --muted: #6b6560;
    --border: #d4cfc4;
    --white: #fdfcfa;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Cabinet Grotesk', sans-serif;
    background: var(--paper);
    color: var(--ink);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ NOISE OVERLAY ‚îÄ‚îÄ‚îÄ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    opacity: 0.4;
  }

  /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
  header {
    padding: 2rem 3rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
    background: var(--white);
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .logo {
    font-family: 'Fraunces', serif;
    font-size: 1.6rem;
    font-weight: 900;
    letter-spacing: -0.02em;
    color: var(--ink);
  }
  .logo span { color: var(--gold); }

  .nav-pills { display: flex; gap: 0.5rem; }
  .pill {
    padding: 0.45rem 1.1rem;
    border-radius: 100px;
    border: 1.5px solid var(--border);
    background: transparent;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--muted);
    font-weight: 500;
  }
  .pill.active, .pill:hover {
    background: var(--ink);
    color: var(--paper);
    border-color: var(--ink);
  }

  /* ‚îÄ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ‚îÄ */
  .app-grid {
    display: grid;
    grid-template-columns: 420px 1fr;
    min-height: calc(100vh - 73px);
  }

  /* ‚îÄ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ‚îÄ */
  .input-panel {
    background: var(--white);
    border-right: 1px solid var(--border);
    overflow-y: auto;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .panel-title {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--ink);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .panel-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .form-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }

  label {
    font-family: 'DM Mono', monospace;
    font-size: 0.68rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    display: block;
    margin-bottom: 0.3rem;
  }

  input, textarea, select {
    width: 100%;
    padding: 0.65rem 0.85rem;
    background: var(--cream);
    border: 1.5px solid var(--border);
    border-radius: 8px;
    font-family: 'Cabinet Grotesk', sans-serif;
    font-size: 0.88rem;
    color: var(--ink);
    transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
    resize: vertical;
  }
  input:focus, textarea:focus, select:focus {
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(200,168,75,0.12);
  }
  textarea { min-height: 80px; }

  /* tags */
  .tag-input-area {
    background: var(--cream);
    border: 1.5px solid var(--border);
    border-radius: 8px;
    padding: 0.5rem;
    min-height: 48px;
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    align-items: center;
    cursor: text;
    transition: border-color 0.2s;
  }
  .tag-input-area:focus-within { border-color: var(--gold); box-shadow: 0 0 0 3px rgba(200,168,75,0.12); }
  .tag {
    background: var(--gold);
    color: var(--ink);
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    padding: 0.25rem 0.6rem;
    border-radius: 100px;
    display: flex;
    align-items: center;
    gap: 0.3rem;
    animation: popIn 0.15s ease;
  }
  @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .tag-remove { cursor: pointer; opacity: 0.6; font-size: 0.8rem; }
  .tag-remove:hover { opacity: 1; }
  .tag-input {
    border: none;
    background: transparent;
    outline: none;
    font-family: 'Cabinet Grotesk', sans-serif;
    font-size: 0.88rem;
    min-width: 80px;
    flex: 1;
  }

  /* dynamic list items */
  .dynamic-list { display: flex; flex-direction: column; gap: 0.6rem; }
  .list-item {
    background: var(--cream);
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 0.85rem;
    position: relative;
    animation: slideIn 0.2s ease;
  }
  @keyframes slideIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
  .list-item .remove-btn {
    position: absolute;
    top: 0.6rem;
    right: 0.6rem;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--muted);
    font-size: 1rem;
    padding: 0.2rem;
    transition: color 0.2s;
  }
  .list-item .remove-btn:hover { color: var(--rust); }

  .add-btn {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.55rem 1rem;
    background: none;
    border: 1.5px dashed var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Cabinet Grotesk', sans-serif;
    font-size: 0.85rem;
    color: var(--muted);
    transition: all 0.2s;
    width: 100%;
    justify-content: center;
  }
  .add-btn:hover { border-color: var(--gold); color: var(--gold); background: rgba(200,168,75,0.05); }

  /* generate buttons */
  .generate-group {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    padding-top: 0.5rem;
  }

  .gen-btn {
    padding: 0.9rem 1.5rem;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-family: 'Cabinet Grotesk', sans-serif;
    font-size: 0.95rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    transition: all 0.25s;
    position: relative;
    overflow: hidden;
  }
  .gen-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0.15);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .gen-btn:hover::after { opacity: 1; }
  .gen-btn:active { transform: scale(0.98); }

  .btn-resume { background: var(--ink); color: var(--paper); }
  .btn-cover { background: var(--teal); color: white; }
  .btn-portfolio { background: var(--rust); color: white; }

  .gen-btn:disabled { opacity: 0.5; cursor: not-allowed; }
  .gen-btn .spinner {
    width: 16px; height: 16px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
    display: none;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .gen-btn.loading .spinner { display: block; }
  .gen-btn.loading .btn-label { opacity: 0.6; }

  /* ‚îÄ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ‚îÄ */
  .output-panel {
    background: var(--cream);
    overflow-y: auto;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .output-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .output-title {
    font-family: 'Fraunces', serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--ink);
  }

  .output-actions { display: flex; gap: 0.5rem; }
  .action-btn {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    border: 1.5px solid var(--border);
    background: var(--white);
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    cursor: pointer;
    color: var(--muted);
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .action-btn:hover { border-color: var(--ink); color: var(--ink); }
  .action-btn.primary { background: var(--gold); border-color: var(--gold); color: var(--ink); font-weight: 500; }
  .action-btn.primary:hover { background: var(--gold-light); }

  /* Tab switcher for output */
  .output-tabs {
    display: flex;
    gap: 0;
    background: var(--border);
    border-radius: 10px;
    padding: 3px;
    width: fit-content;
  }
  .out-tab {
    padding: 0.45rem 1.1rem;
    border-radius: 8px;
    background: none;
    border: none;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    color: var(--muted);
    transition: all 0.2s;
    font-weight: 500;
  }
  .out-tab.active {
    background: var(--white);
    color: var(--ink);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  /* ‚îÄ‚îÄ‚îÄ DOCUMENT PREVIEW ‚îÄ‚îÄ‚îÄ */
  .doc-preview {
    background: var(--white);
    border-radius: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 4px 24px rgba(0,0,0,0.06), 0 1px 4px rgba(0,0,0,0.04);
    overflow: hidden;
    min-height: 600px;
    position: relative;
  }

  .doc-content {
    padding: 3rem 3.5rem;
    font-family: 'Cabinet Grotesk', sans-serif;
    line-height: 1.6;
    display: none;
  }
  .doc-content.active { display: block; }

  /* ‚îÄ‚îÄ‚îÄ RESUME STYLES ‚îÄ‚îÄ‚îÄ */
  .resume-header-doc {
    border-bottom: 3px solid var(--ink);
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .resume-name {
    font-family: 'Fraunces', serif;
    font-size: 2.4rem;
    font-weight: 900;
    line-height: 1;
    color: var(--ink);
    letter-spacing: -0.02em;
  }
  .resume-title-doc {
    font-size: 1rem;
    color: var(--teal);
    font-weight: 700;
    margin-top: 0.3rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-family: 'DM Mono', monospace;
    font-size: 0.8rem;
  }
  .resume-contact {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 0.8rem;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    color: var(--muted);
  }
  .resume-contact a { color: var(--muted); text-decoration: none; }
  .resume-contact a:hover { color: var(--gold); }

  .resume-section { margin-bottom: 1.5rem; }
  .resume-section-title {
    font-family: 'Fraunces', serif;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--gold);
    margin-bottom: 0.6rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .resume-section-title::after { content: ''; flex: 1; height: 1px; background: var(--border); }

  .resume-summary {
    font-size: 0.9rem;
    color: var(--ink);
    line-height: 1.7;
  }

  .exp-item, .edu-item, .proj-item {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--cream);
  }
  .exp-item:last-child, .edu-item:last-child, .proj-item:last-child {
    border-bottom: none; margin-bottom: 0; padding-bottom: 0;
  }

  .exp-header { display: flex; justify-content: space-between; align-items: flex-start; }
  .exp-role { font-size: 0.95rem; font-weight: 700; color: var(--ink); }
  .exp-company { font-size: 0.85rem; color: var(--teal); font-weight: 500; }
  .exp-date { font-family: 'DM Mono', monospace; font-size: 0.7rem; color: var(--muted); white-space: nowrap; }
  .exp-desc { font-size: 0.85rem; color: var(--ink); margin-top: 0.4rem; line-height: 1.6; }
  .exp-bullets { margin-top: 0.4rem; padding-left: 1rem; }
  .exp-bullets li { font-size: 0.83rem; color: var(--ink); margin-bottom: 0.25rem; line-height: 1.5; }

  .skills-grid { display: flex; flex-wrap: wrap; gap: 0.4rem; }
  .skill-badge {
    padding: 0.3rem 0.75rem;
    background: var(--cream);
    border: 1px solid var(--border);
    border-radius: 100px;
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    color: var(--ink);
  }

  /* ‚îÄ‚îÄ‚îÄ COVER LETTER STYLES ‚îÄ‚îÄ‚îÄ */
  .cover-body { font-size: 0.9rem; line-height: 1.8; color: var(--ink); white-space: pre-wrap; }
  .cover-date { font-family: 'DM Mono', monospace; font-size: 0.75rem; color: var(--muted); margin-bottom: 1.5rem; }
  .cover-sign { margin-top: 2rem; font-weight: 700; }

  /* ‚îÄ‚îÄ‚îÄ PORTFOLIO STYLES ‚îÄ‚îÄ‚îÄ */
  .portfolio-hero {
    background: linear-gradient(135deg, var(--ink) 0%, #2a2a2a 100%);
    color: var(--paper);
    padding: 2.5rem 3.5rem;
    margin: -3rem -3.5rem 2rem;
    position: relative;
    overflow: hidden;
  }
  .portfolio-hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: var(--gold);
    opacity: 0.07;
  }
  .portfolio-hero-name {
    font-family: 'Fraunces', serif;
    font-size: 2.8rem;
    font-weight: 900;
    letter-spacing: -0.03em;
    line-height: 1;
  }
  .portfolio-hero-bio { font-size: 0.9rem; opacity: 0.7; margin-top: 0.8rem; max-width: 500px; line-height: 1.6; }
  .portfolio-tags { display: flex; gap: 0.4rem; flex-wrap: wrap; margin-top: 1rem; }
  .portfolio-tag {
    padding: 0.25rem 0.7rem;
    background: rgba(200,168,75,0.2);
    border: 1px solid var(--gold);
    border-radius: 100px;
    font-family: 'DM Mono', monospace;
    font-size: 0.68rem;
    color: var(--gold-light);
  }

  .projects-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
  .project-card {
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 1.2rem;
    background: var(--cream);
    transition: border-color 0.2s, transform 0.2s;
  }
  .project-card:hover { border-color: var(--gold); transform: translateY(-2px); }
  .project-card-title { font-weight: 700; font-size: 0.9rem; color: var(--ink); }
  .project-card-desc { font-size: 0.82rem; color: var(--muted); margin-top: 0.4rem; line-height: 1.5; }
  .project-card-tech { display: flex; gap: 0.3rem; flex-wrap: wrap; margin-top: 0.7rem; }
  .project-card-tech span {
    font-family: 'DM Mono', monospace;
    font-size: 0.62rem;
    background: var(--white);
    border: 1px solid var(--border);
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    color: var(--muted);
  }

  /* ‚îÄ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ‚îÄ */
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 500px;
    text-align: center;
    gap: 1rem;
  }
  .empty-icon { font-size: 3.5rem; opacity: 0.3; }
  .empty-title { font-family: 'Fraunces', serif; font-size: 1.3rem; font-weight: 700; color: var(--muted); }
  .empty-sub { font-size: 0.85rem; color: var(--muted); max-width: 280px; line-height: 1.6; }

  /* ‚îÄ‚îÄ‚îÄ LOADING STATE ‚îÄ‚îÄ‚îÄ */
  .loading-state {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 500px;
    text-align: center;
    gap: 1.5rem;
  }
  .loading-state.visible { display: flex; }
  .loading-bars {
    display: flex;
    gap: 4px;
    align-items: flex-end;
    height: 40px;
  }
  .loading-bars span {
    width: 6px;
    background: var(--gold);
    border-radius: 3px;
    animation: barDance 1s ease-in-out infinite;
  }
  .loading-bars span:nth-child(1) { animation-delay: 0s; }
  .loading-bars span:nth-child(2) { animation-delay: 0.1s; }
  .loading-bars span:nth-child(3) { animation-delay: 0.2s; }
  .loading-bars span:nth-child(4) { animation-delay: 0.3s; }
  .loading-bars span:nth-child(5) { animation-delay: 0.4s; }
  @keyframes barDance {
    0%, 100% { height: 8px; }
    50% { height: 36px; }
  }
  .loading-text { font-family: 'DM Mono', monospace; font-size: 0.8rem; color: var(--muted); }
  .loading-tip { font-size: 0.82rem; color: var(--muted); font-style: italic; }

  /* ‚îÄ‚îÄ‚îÄ ERROR STATE ‚îÄ‚îÄ‚îÄ */
  .api-error {
    background: #fef2f2;
    border: 1.5px solid #fca5a5;
    border-radius: 10px;
    padding: 1rem 1.2rem;
    font-size: 0.85rem;
    color: #c0392b;
    display: none;
    line-height: 1.5;
  }
  .api-error.visible { display: block; }

  /* ‚îÄ‚îÄ‚îÄ JOB TARGET ‚îÄ‚îÄ‚îÄ */
  .job-target-card {
    background: linear-gradient(135deg, rgba(42,122,111,0.08), rgba(42,122,111,0.02));
    border: 1.5px solid rgba(42,122,111,0.25);
    border-radius: 10px;
    padding: 0.85rem 1rem;
    margin-bottom: 0.5rem;
  }
  .job-target-label { font-family: 'DM Mono', monospace; font-size: 0.65rem; color: var(--teal); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.25rem; }

  /* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .app-grid { grid-template-columns: 1fr; }
    .input-panel { max-height: 60vh; }
    header { padding: 1rem 1.5rem; }
    .doc-content { padding: 2rem; }
    .portfolio-hero { margin: -2rem -2rem 1.5rem; padding: 2rem; }
    .projects-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="logo">Resum√©<span>AI</span></div>
  <nav class="nav-pills">
    <button class="pill active" onclick="switchMode('resume')">Resume</button>
    <button class="pill" onclick="switchMode('cover')">Cover Letter</button>
    <button class="pill" onclick="switchMode('portfolio')">Portfolio</button>
  </nav>
</header>

<div class="app-grid">
  <!-- LEFT: INPUT PANEL -->
  <aside class="input-panel">

    <!-- Personal Info -->
    <div class="form-section">
      <div class="panel-title">Personal Info</div>
      <div class="form-row">
        <div><label>First Name</label><input type="text" id="firstName" placeholder="Alex" value=""></div>
        <div><label>Last Name</label><input type="text" id="lastName" placeholder="Morgan" value=""></div>
      </div>
      <div><label>Professional Title</label><input type="text" id="profTitle" placeholder="e.g. Full-Stack Developer" value=""></div>
      <div class="form-row">
        <div><label>Email</label><input type="email" id="email" placeholder="alex@university.edu"></div>
        <div><label>Phone</label><input type="tel" id="phone" placeholder="+1 (555) 000-0000"></div>
      </div>
      <div class="form-row">
        <div><label>LinkedIn</label><input type="text" id="linkedin" placeholder="linkedin.com/in/alex"></div>
        <div><label>GitHub / Portfolio</label><input type="text" id="github" placeholder="github.com/alex"></div>
      </div>
      <div><label>Location</label><input type="text" id="location" placeholder="San Francisco, CA"></div>
    </div>

    <!-- Education -->
    <div class="form-section">
      <div class="panel-title">Education</div>
      <div class="dynamic-list" id="eduList"></div>
      <button class="add-btn" onclick="addEdu()">Ôºã Add Education</button>
    </div>

    <!-- Experience -->
    <div class="form-section">
      <div class="panel-title">Experience</div>
      <div class="dynamic-list" id="expList"></div>
      <button class="add-btn" onclick="addExp()">Ôºã Add Experience</button>
    </div>

    <!-- Projects -->
    <div class="form-section">
      <div class="panel-title">Projects</div>
      <div class="dynamic-list" id="projList"></div>
      <button class="add-btn" onclick="addProj()">Ôºã Add Project</button>
    </div>

    <!-- Skills -->
    <div class="form-section">
      <div class="panel-title">Skills</div>
      <label>Type a skill & press Enter</label>
      <div class="tag-input-area" id="skillsArea" onclick="document.getElementById('skillInput').focus()">
        <input type="text" id="skillInput" class="tag-input" placeholder="e.g. Python, React...">
      </div>
    </div>

    <!-- Job Target (for cover letter) -->
    <div class="form-section">
      <div class="panel-title">Job Target</div>
      <div class="job-target-card">
        <div class="job-target-label">üéØ Tailors cover letter & summaries</div>
        <input type="text" id="targetRole" placeholder="Software Engineer Intern" style="background:transparent;border:none;padding:0;font-size:0.88rem;box-shadow:none;">
      </div>
      <div><label>Company Name</label><input type="text" id="targetCompany" placeholder="Google, Stripe, etc."></div>
      <div><label>Extra Notes / Highlights</label><textarea id="extraNotes" placeholder="Mention specific achievements, interests, or anything you want AI to highlight..."></textarea></div>
    </div>

    <!-- Generate Buttons -->
    <div class="generate-group">
      <div class="api-error" id="apiError"></div>
      <button class="gen-btn btn-resume" onclick="generate('resume')">
        <span class="spinner"></span>
        <span class="btn-label">‚ú¶ Generate Resume</span>
      </button>
      <button class="gen-btn btn-cover" onclick="generate('cover')">
        <span class="spinner"></span>
        <span class="btn-label">‚úâ Generate Cover Letter</span>
      </button>
      <button class="gen-btn btn-portfolio" onclick="generate('portfolio')">
        <span class="spinner"></span>
        <span class="btn-label">‚¨° Generate Portfolio</span>
      </button>
    </div>

  </aside>

  <!-- RIGHT: OUTPUT PANEL -->
  <main class="output-panel">
    <div class="output-header">
      <div class="output-title" id="outputTitle">Your Documents</div>
      <div class="output-actions" id="outputActions" style="display:none">
        <button class="action-btn" onclick="copyText()">‚éò Copy</button>
        <button class="action-btn primary" onclick="printDoc()">‚Üì Download</button>
      </div>
    </div>

    <!-- Tabs (hidden until generated) -->
    <div class="output-tabs" id="outputTabs" style="display:none">
      <button class="out-tab active" onclick="showTab('resume')">Resume</button>
      <button class="out-tab" onclick="showTab('cover')">Cover Letter</button>
      <button class="out-tab" onclick="showTab('portfolio')">Portfolio</button>
    </div>

    <!-- Loading -->
    <div class="loading-state" id="loadingState">
      <div class="loading-bars">
        <span></span><span></span><span></span><span></span><span></span>
      </div>
      <div class="loading-text" id="loadingText">Generating your resume...</div>
      <div class="loading-tip" id="loadingTip">AI is crafting a tailored professional summary ‚ú¶</div>
    </div>

    <!-- Document Preview -->
    <div class="doc-preview" id="docPreview">
      <!-- Empty State -->
      <div class="empty-state" id="emptyState">
        <div class="empty-icon">‚ú¶</div>
        <div class="empty-title">Your document appears here</div>
        <div class="empty-sub">Fill in your details on the left, then hit Generate to create a tailored, AI-powered document.</div>
      </div>

      <!-- Resume Output -->
      <div class="doc-content" id="resumeOutput"></div>
      <!-- Cover Letter Output -->
      <div class="doc-content" id="coverOutput"></div>
      <!-- Portfolio Output -->
      <div class="doc-content" id="portfolioOutput"></div>
    </div>

  </main>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ
let skills = [];
let educations = [];
let experiences = [];
let projects = [];
let generatedContent = { resume: '', cover: '', portfolio: '' };
let currentMode = 'resume';
let activeTab = null;

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', () => {
  // Skill input
  document.getElementById('skillInput').addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ',') {
      e.preventDefault();
      const val = e.target.value.trim().replace(/,$/, '');
      if (val && !skills.includes(val)) {
        skills.push(val);
        renderSkills();
      }
      e.target.value = '';
    } else if (e.key === 'Backspace' && !e.target.value) {
      skills.pop();
      renderSkills();
    }
  });

  // Add default entries
  addEdu();
  addExp();
  addProj();
});

function renderSkills() {
  const area = document.getElementById('skillsArea');
  const input = document.getElementById('skillInput');
  // Remove old tags
  area.querySelectorAll('.tag').forEach(t => t.remove());
  skills.forEach((s, i) => {
    const tag = document.createElement('div');
    tag.className = 'tag';
    tag.innerHTML = `${s}<span class="tag-remove" onclick="removeSkill(${i})">√ó</span>`;
    area.insertBefore(tag, input);
  });
}

function removeSkill(i) {
  skills.splice(i, 1);
  renderSkills();
}

// ‚îÄ‚îÄ‚îÄ DYNAMIC LISTS ‚îÄ‚îÄ‚îÄ
function addEdu() {
  const id = Date.now();
  educations.push({ id });
  const list = document.getElementById('eduList');
  const item = document.createElement('div');
  item.className = 'list-item';
  item.dataset.id = id;
  item.innerHTML = `
    <button class="remove-btn" onclick="removeItem('educations','eduList',${id})">√ó</button>
    <div class="form-row">
      <div><label>Institution</label><input type="text" data-field="school" placeholder="MIT, Stanford..."></div>
      <div><label>Degree</label><input type="text" data-field="degree" placeholder="B.Sc. Computer Science"></div>
    </div>
    <div class="form-row">
      <div><label>GPA (optional)</label><input type="text" data-field="gpa" placeholder="3.8 / 4.0"></div>
      <div><label>Graduation Year</label><input type="text" data-field="year" placeholder="2025"></div>
    </div>
    <div><label>Relevant Coursework</label><input type="text" data-field="courses" placeholder="Data Structures, ML, Algorithms"></div>
  `;
  list.appendChild(item);
}

function addExp() {
  const id = Date.now();
  experiences.push({ id });
  const list = document.getElementById('expList');
  const item = document.createElement('div');
  item.className = 'list-item';
  item.dataset.id = id;
  item.innerHTML = `
    <button class="remove-btn" onclick="removeItem('experiences','expList',${id})">√ó</button>
    <div class="form-row">
      <div><label>Role / Title</label><input type="text" data-field="role" placeholder="Software Intern"></div>
      <div><label>Company</label><input type="text" data-field="company" placeholder="Google"></div>
    </div>
    <div class="form-row">
      <div><label>Duration</label><input type="text" data-field="duration" placeholder="Jun 2024 ‚Äì Aug 2024"></div>
      <div><label>Location</label><input type="text" data-field="expLocation" placeholder="Remote / NYC"></div>
    </div>
    <div><label>Key Achievements</label><textarea data-field="achievements" placeholder="Reduced API latency by 40%, built dashboard used by 10k+ users..."></textarea></div>
  `;
  list.appendChild(item);
}

function addProj() {
  const id = Date.now();
  projects.push({ id });
  const list = document.getElementById('projList');
  const item = document.createElement('div');
  item.className = 'list-item';
  item.dataset.id = id;
  item.innerHTML = `
    <button class="remove-btn" onclick="removeItem('projects','projList',${id})">√ó</button>
    <div class="form-row">
      <div><label>Project Name</label><input type="text" data-field="name" placeholder="AI Chatbot"></div>
      <div><label>Tech Stack</label><input type="text" data-field="stack" placeholder="React, Node, OpenAI"></div>
    </div>
    <div><label>Description & Impact</label><textarea data-field="desc" placeholder="What did you build? What problem did it solve? What was the impact?"></textarea></div>
    <div><label>Link (optional)</label><input type="text" data-field="link" placeholder="github.com/..."></div>
  `;
  list.appendChild(item);
}

function removeItem(arr, listId, id) {
  window[arr] = window[arr].filter(e => e.id !== id);
  document.querySelector(`#${listId} [data-id="${id}"]`).remove();
}

// ‚îÄ‚îÄ‚îÄ COLLECT DATA ‚îÄ‚îÄ‚îÄ
function collectData() {
  const get = id => document.getElementById(id)?.value?.trim() || '';

  function collectList(listId) {
    return Array.from(document.querySelectorAll(`#${listId} .list-item`)).map(item => {
      const obj = {};
      item.querySelectorAll('[data-field]').forEach(el => {
        obj[el.dataset.field] = el.value?.trim() || '';
      });
      return obj;
    });
  }

  return {
    name: `${get('firstName')} ${get('lastName')}`.trim() || 'Your Name',
    profTitle: get('profTitle') || 'Student',
    email: get('email'),
    phone: get('phone'),
    linkedin: get('linkedin'),
    github: get('github'),
    location: get('location'),
    educations: collectList('eduList'),
    experiences: collectList('expList'),
    projects: collectList('projList'),
    skills,
    targetRole: get('targetRole'),
    targetCompany: get('targetCompany'),
    extraNotes: get('extraNotes'),
  };
}

// ‚îÄ‚îÄ‚îÄ MODE SWITCH ‚îÄ‚îÄ‚îÄ
function switchMode(mode) {
  currentMode = mode;
  document.querySelectorAll('.nav-pills .pill').forEach((p, i) => {
    p.classList.toggle('active', ['resume','cover','portfolio'][i] === mode);
  });
}

// ‚îÄ‚îÄ‚îÄ GENERATE ‚îÄ‚îÄ‚îÄ
async function generate(type) {
  const data = collectData();
  const btn = document.querySelector(`.btn-${type === 'resume' ? 'resume' : type === 'cover' ? 'cover' : 'portfolio'}`);

  setLoading(true, type, btn);

  const tips = {
    resume: ['Tailoring your professional summary ‚ú¶', 'Crafting achievement bullet points ‚ú¶', 'Optimizing for ATS compatibility ‚ú¶'],
    cover: ['Personalizing your story ‚ú¶', 'Matching tone to company culture ‚ú¶', 'Highlighting key strengths ‚ú¶'],
    portfolio: ['Building your showcase ‚ú¶', 'Structuring project highlights ‚ú¶', 'Creating your personal brand ‚ú¶']
  };
  const tip = tips[type][Math.floor(Math.random() * 3)];
  document.getElementById('loadingTip').textContent = tip;
  document.getElementById('loadingText').textContent = `Generating your ${type === 'cover' ? 'cover letter' : type}...`;

  const prompt = buildPrompt(type, data);

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        messages: [{ role: 'user', content: prompt }]
      })
    });
    const result = await response.json();
    if (result.error) throw new Error(result.error.message);

    const text = result.content.map(c => c.text || '').join('');
    generatedContent[type] = text;

    renderOutput(type, data, text);
    showError('');
  } catch (err) {
    showError('Could not connect to AI. Please check your API key or network. Error: ' + err.message);
    setLoading(false, type, btn);
    return;
  }

  setLoading(false, type, btn);
}

function buildPrompt(type, d) {
  const base = `Student data:
Name: ${d.name}
Title: ${d.profTitle}
Location: ${d.location}
Education: ${d.educations.map(e => `${e.degree} at ${e.school}, ${e.year}, GPA: ${e.gpa}, Courses: ${e.courses}`).join(' | ')}
Experience: ${d.experiences.map(e => `${e.role} at ${e.company} (${e.duration}): ${e.achievements}`).join(' | ')}
Projects: ${d.projects.map(p => `${p.name} [${p.stack}]: ${p.desc}`).join(' | ')}
Skills: ${d.skills.join(', ')}
Target Role: ${d.targetRole}
Target Company: ${d.targetCompany}
Extra Notes: ${d.extraNotes}`;

  if (type === 'resume') {
    return `${base}

Generate a polished, ATS-friendly professional summary paragraph (3-4 sentences) for this student's resume. Then generate 2-3 impactful bullet points for each of their work experiences (use action verbs, include metrics where implied). Format as JSON:
{"summary": "...", "expBullets": {"0": ["bullet1","bullet2"], "1": ["bullet1","bullet2"]}}
Only return valid JSON, no markdown fences.`;
  } else if (type === 'cover') {
    return `${base}

Write a compelling, personalized cover letter for ${d.targetRole || 'the position'} at ${d.targetCompany || 'the company'}. Make it sound genuine, enthusiastic, and specific. 3 paragraphs max. Start directly with the letter body (no "Dear Hiring Manager" yet, I'll add that). End with a strong closing sentence. Just plain text.`;
  } else {
    return `${base}

Write a compelling 2-sentence bio for this student's portfolio page that highlights their unique strengths and passion. Then for each project, write a punchy 1-sentence impact statement. Format as JSON:
{"bio": "...", "projectBios": ["statement for project 1", "statement for project 2", "..."]}
Only return valid JSON, no markdown fences.`;
  }
}

// ‚îÄ‚îÄ‚îÄ RENDER OUTPUT ‚îÄ‚îÄ‚îÄ
function renderOutput(type, data, aiText) {
  document.getElementById('emptyState').style.display = 'none';
  document.getElementById('outputTabs').style.display = 'flex';
  document.getElementById('outputActions').style.display = 'flex';

  if (type === 'resume') renderResume(data, aiText);
  else if (type === 'cover') renderCover(data, aiText);
  else renderPortfolio(data, aiText);

  showTab(type);
}

function renderResume(data, aiText) {
  let parsed = {};
  try { parsed = JSON.parse(aiText.replace(/```json|```/g, '').trim()); } catch (e) { parsed = { summary: aiText }; }

  const edus = data.educations.filter(e => e.school);
  const exps = data.experiences.filter(e => e.role || e.company);
  const projs = data.projects.filter(p => p.name);

  document.getElementById('resumeOutput').innerHTML = `
    <div class="resume-header-doc">
      <div class="resume-name">${data.name}</div>
      <div class="resume-title-doc">${data.profTitle}</div>
      <div class="resume-contact">
        ${data.email ? `<span>‚úâ ${data.email}</span>` : ''}
        ${data.phone ? `<span>üìû ${data.phone}</span>` : ''}
        ${data.location ? `<span>üìç ${data.location}</span>` : ''}
        ${data.linkedin ? `<a href="#">üîó ${data.linkedin}</a>` : ''}
        ${data.github ? `<a href="#">‚å• ${data.github}</a>` : ''}
      </div>
    </div>

    ${parsed.summary ? `
    <div class="resume-section">
      <div class="resume-section-title">Summary</div>
      <div class="resume-summary">${parsed.summary}</div>
    </div>` : ''}

    ${edus.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Education</div>
      ${edus.map(e => `
        <div class="edu-item">
          <div class="exp-header">
            <div>
              <div class="exp-role">${e.degree || 'Degree'}</div>
              <div class="exp-company">${e.school || 'Institution'}</div>
            </div>
            <div class="exp-date">${e.year || ''} ${e.gpa ? '¬∑ GPA '+e.gpa : ''}</div>
          </div>
          ${e.courses ? `<div class="exp-desc">Relevant: ${e.courses}</div>` : ''}
        </div>`).join('')}
    </div>` : ''}

    ${exps.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Experience</div>
      ${exps.map((e, i) => `
        <div class="exp-item">
          <div class="exp-header">
            <div>
              <div class="exp-role">${e.role || 'Role'}</div>
              <div class="exp-company">${e.company || 'Company'} ${e.expLocation ? '¬∑ '+e.expLocation : ''}</div>
            </div>
            <div class="exp-date">${e.duration || ''}</div>
          </div>
          ${parsed.expBullets && parsed.expBullets[i] ? `
          <ul class="exp-bullets">
            ${parsed.expBullets[i].map(b => `<li>${b}</li>`).join('')}
          </ul>` : e.achievements ? `<div class="exp-desc">${e.achievements}</div>` : ''}
        </div>`).join('')}
    </div>` : ''}

    ${projs.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Projects</div>
      ${projs.map(p => `
        <div class="proj-item">
          <div class="exp-header">
            <div class="exp-role">${p.name}</div>
            <div class="exp-date" style="font-family:'DM Mono',monospace;font-size:0.7rem;color:var(--muted)">${p.stack || ''}</div>
          </div>
          <div class="exp-desc">${p.desc || ''}</div>
          ${p.link ? `<div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--teal);margin-top:0.3rem">${p.link}</div>` : ''}
        </div>`).join('')}
    </div>` : ''}

    ${data.skills.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Skills</div>
      <div class="skills-grid">
        ${data.skills.map(s => `<span class="skill-badge">${s}</span>`).join('')}
      </div>
    </div>` : ''}
  `;
}

function renderCover(data, aiText) {
  const today = new Date().toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
  document.getElementById('coverOutput').innerHTML = `
    <div class="cover-date">${today}</div>
    <div style="margin-bottom:1.2rem;">
      <strong>Dear Hiring Manager${data.targetCompany ? ` at ${data.targetCompany}` : ''},</strong>
    </div>
    <div class="cover-body">${aiText}</div>
    <div class="cover-sign">
      <div>Sincerely,</div>
      <div style="margin-top:0.5rem;font-family:'Fraunces',serif;font-size:1.1rem;">${data.name}</div>
      <div style="font-family:'DM Mono',monospace;font-size:0.72rem;color:var(--muted);margin-top:0.2rem">${data.email} ${data.phone ? '¬∑ '+data.phone : ''}</div>
    </div>
  `;
}

function renderPortfolio(data, aiText) {
  let parsed = {};
  try { parsed = JSON.parse(aiText.replace(/```json|```/g, '').trim()); } catch (e) { parsed = { bio: aiText, projectBios: [] }; }

  const projs = data.projects.filter(p => p.name);

  document.getElementById('portfolioOutput').innerHTML = `
    <div class="portfolio-hero">
      <div class="portfolio-hero-name">${data.name}</div>
      <div style="font-family:'DM Mono',monospace;font-size:0.78rem;opacity:0.6;margin-top:0.3rem;letter-spacing:0.05em;">${data.profTitle.toUpperCase()}</div>
      <div class="portfolio-hero-bio">${parsed.bio || ''}</div>
      <div class="portfolio-tags">
        ${data.skills.slice(0,8).map(s => `<span class="portfolio-tag">${s}</span>`).join('')}
      </div>
      <div style="display:flex;gap:1rem;margin-top:1.2rem;">
        ${data.email ? `<span style="font-family:'DM Mono',monospace;font-size:0.7rem;opacity:0.6">‚úâ ${data.email}</span>` : ''}
        ${data.github ? `<span style="font-family:'DM Mono',monospace;font-size:0.7rem;opacity:0.6">‚å• ${data.github}</span>` : ''}
        ${data.linkedin ? `<span style="font-family:'DM Mono',monospace;font-size:0.7rem;opacity:0.6">üîó ${data.linkedin}</span>` : ''}
      </div>
    </div>

    ${projs.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Featured Projects</div>
      <div class="projects-grid">
        ${projs.map((p, i) => `
          <div class="project-card">
            <div class="project-card-title">${p.name}</div>
            <div class="project-card-desc">${(parsed.projectBios && parsed.projectBios[i]) || p.desc || ''}</div>
            <div class="project-card-tech">
              ${(p.stack || '').split(',').map(t => t.trim() ? `<span>${t.trim()}</span>` : '').join('')}
            </div>
            ${p.link ? `<div style="font-family:'DM Mono',monospace;font-size:0.65rem;color:var(--teal);margin-top:0.6rem">${p.link}</div>` : ''}
          </div>`).join('')}
      </div>
    </div>` : ''}

    ${data.educations.filter(e=>e.school).length ? `
    <div class="resume-section">
      <div class="resume-section-title">Education</div>
      ${data.educations.filter(e=>e.school).map(e => `
        <div class="edu-item">
          <div class="exp-header">
            <div><div class="exp-role">${e.degree}</div><div class="exp-company">${e.school}</div></div>
            <div class="exp-date">${e.year}</div>
          </div>
        </div>`).join('')}
    </div>` : ''}

    ${data.skills.length ? `
    <div class="resume-section">
      <div class="resume-section-title">Technical Skills</div>
      <div class="skills-grid">${data.skills.map(s => `<span class="skill-badge">${s}</span>`).join('')}</div>
    </div>` : ''}
  `;
}

// ‚îÄ‚îÄ‚îÄ TAB SWITCHING ‚îÄ‚îÄ‚îÄ
function showTab(type) {
  activeTab = type;
  document.querySelectorAll('.doc-content').forEach(d => d.classList.remove('active'));
  document.getElementById(type + 'Output').classList.add('active');
  document.querySelectorAll('.out-tab').forEach((t, i) => {
    t.classList.toggle('active', ['resume','cover','portfolio'][i] === type);
  });
  const titles = { resume: 'Your Resume', cover: 'Cover Letter', portfolio: 'Portfolio' };
  document.getElementById('outputTitle').textContent = titles[type] || 'Document';
}

// ‚îÄ‚îÄ‚îÄ UTILITIES ‚îÄ‚îÄ‚îÄ
function setLoading(on, type, btn) {
  document.getElementById('loadingState').classList.toggle('visible', on);
  document.getElementById('docPreview').style.display = on ? 'none' : 'block';
  if (btn) btn.classList.toggle('loading', on);
  if (btn) btn.disabled = on;
}

function showError(msg) {
  const el = document.getElementById('apiError');
  el.textContent = msg;
  el.classList.toggle('visible', !!msg);
}

function copyText() {
  const el = document.getElementById(activeTab + 'Output');
  if (el) navigator.clipboard.writeText(el.innerText).then(() => alert('Copied to clipboard!'));
}

function printDoc() {
  const el = document.getElementById(activeTab + 'Output');
  if (!el || !el.innerHTML) return;
  const win = window.open('', '_blank');
  win.document.write(`<!DOCTYPE html><html><head><title>${activeTab}</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,700;0,900;1,300&family=DM+Mono:wght@300;400;500&family=Cabinet+Grotesk:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
      :root{--ink:#0d0d0d;--paper:#f5f0e8;--cream:#ede8dc;--gold:#c8a84b;--teal:#2a7a6f;--muted:#6b6560;--border:#d4cfc4;--white:#fdfcfa}
      body{font-family:'Cabinet Grotesk',sans-serif;padding:3rem;max-width:820px;margin:auto;color:var(--ink)}
      ${document.querySelector('style').innerHTML}
    </style></head><body>${el.innerHTML}</body></html>`);
  win.document.close();
  setTimeout(() => win.print(), 500);
}
</script>
</body>
</html>